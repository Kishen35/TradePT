<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PocketPT ‚Äî Learn Trading</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link
    href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;500;600;700&family=IBM+Plex+Mono:wght@300;400;500&display=swap"
    rel="stylesheet">
  <link href="./styles/trading-styles.css" rel="stylesheet">
</head>

<body>
  <div class="app">

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê NAV ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <nav>
      <div class="nav-brand">
        Pocket<span class="brand-red">PT</span><span class="brand-dot"></span>
      </div>
      <div class="nav-tabs">
        <button class="nav-tab active" id="learn-nav-tab">Learn</button>
        <button class="nav-tab" id="tutor-nav-tab">AI Tutor</button>
        <button class="nav-tab" id="autopsy-nav-tab">Trade Autopsy</button>
        <button class="nav-tab" id="leaderboard-nav-tab">Leaderboard</button>
      </div>
      <div class="nav-right">
        <div class="streak-chip">üî• <strong id="streakCount">3</strong>d</div>
        <div class="xp-chip">‚ö° <span class="xp-val" id="xpCount">240</span> XP</div>
      </div>
    </nav>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     LEARN TAB
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="tab-learn" class="tab-page active">
      <div class="page-header">
        <div class="page-tag">
          <div class="live-dot-tag"></div>Personalised Curriculum
        </div>
        <h1>Learn the way <em>you</em> trade.</h1>
        <p>AI-powered lessons built around your instruments, your trades, and your learning style ‚Äî not generic YouTube
          content.</p>
      </div>
      <div class="main-content">

        <div class="streak-banner">
          <div class="streak-left">
            <div class="streak-icon">üî•</div>
            <div>
              <div class="streak-count">3-Day Streak</div>
              <div class="streak-sub">You've learned something new every day this week</div>
            </div>
          </div>
          <button class="btn-secondary" id="streak-keep-it-going">Keep it going ‚Üí</button>
        </div>

        <div>
          <div class="section-hd">
            <div class="section-title">Your Learning Paths</div>
            <button class="section-link" id="learning-section-link">Rebuild Curriculum</button>
          </div>
          <div class="path-grid">
            <div class="path-card active" id="path-grid-card-active">
              <div class="path-badge badge-active">Active</div>
              <div class="path-icon">üìà</div>
              <div class="path-title">Technical Analysis</div>
              <div class="path-desc">RSI, MACD, support/resistance. Tailored to synthetic indices.</div>
              <div class="progress-row">
                <div class="progress-bar">
                  <div class="progress-fill fill-red" style="width:42%"></div>
                </div>
                <div class="progress-pct">42%</div>
              </div>
            </div>
            <div class="path-card">
              <div class="path-badge badge-new">New</div>
              <div class="path-icon">üß†</div>
              <div class="path-title">Trading Psychology</div>
              <div class="path-desc">Why you revenge trade after losses. How to stop.</div>
              <div class="progress-row">
                <div class="progress-bar">
                  <div class="progress-fill fill-teal" style="width:8%"></div>
                </div>
                <div class="progress-pct">8%</div>
              </div>
            </div>
            <div class="path-card">
              <div class="path-badge">0 / 8</div>
              <div class="path-icon">‚öñÔ∏è</div>
              <div class="path-title">Risk Management</div>
              <div class="path-desc">Position sizing, stop-loss logic, risk-reward ratios.</div>
              <div class="progress-row">
                <div class="progress-bar">
                  <div class="progress-fill fill-blue" style="width:0%"></div>
                </div>
                <div class="progress-pct">0%</div>
              </div>
            </div>
            <div class="path-card">
              <div class="path-badge badge-locked">üîí Locked</div>
              <div class="path-icon">üèÜ</div>
              <div class="path-title">Advanced Strategies</div>
              <div class="path-desc">Wyckoff, ICT concepts, market structure shifts.</div>
              <div class="progress-row">
                <div class="progress-bar">
                  <div class="progress-fill fill-gold" style="width:0%"></div>
                </div>
                <div class="progress-pct">0%</div>
              </div>
            </div>
          </div>
        </div>

        <div>
          <div class="section-hd">
            <div class="section-title">Concepts to master</div>
            <button class="section-link">View all ‚Üí</button>
          </div>
          <div class="concepts-grid">
            <div class="concept-card done" id="rsi-concept-card">
              <div class="concept-icon">üìä</div>
              <div class="concept-title">RSI</div>
              <div class="concept-desc">Relative Strength Index ‚Äî momentum oscillator</div>
              <div class="concept-status done">‚úì Completed</div>
            </div>
            <div class="concept-card done" id="support-concept-card">
              <div class="concept-icon">üß±</div>
              <div class="concept-title">Support & Resistance</div>
              <div class="concept-desc">Key price levels that matter</div>
              <div class="concept-status done">‚úì Completed</div>
            </div>
            <div class="concept-card" id="macd-concept-card">
              <div class="concept-icon">„Ä∞Ô∏è</div>
              <div class="concept-title">MACD</div>
              <div class="concept-desc">Trend & momentum signal crossovers</div>
              <div class="concept-status todo">‚Üí Up next</div>
            </div>
            <div class="concept-card" id="stop-concept-card">
              <div class="concept-icon">üõ°Ô∏è</div>
              <div class="concept-title">Stop Loss Placement</div>
              <div class="concept-desc">Where to place stops and why</div>
              <div class="concept-status todo">‚Üí Start here</div>
            </div>
            <div class="concept-card" id="candle-concept-card">
              <div class="concept-icon">üïØÔ∏è</div>
              <div class="concept-title">Candlestick Patterns</div>
              <div class="concept-desc">Doji, engulfing, hammer, shooting star</div>
              <div class="concept-status todo">‚Äî Not started</div>
            </div>
            <div class="concept-card" id="risk-concept-card">
              <div class="concept-icon">‚öñÔ∏è</div>
              <div class="concept-title">Risk:Reward</div>
              <div class="concept-desc">How to calculate and why 1:2 matters</div>
              <div class="concept-status todo">‚Äî Not started</div>
            </div>
          </div>
        </div>

        <div class="two-col">
          <div>
            <div class="section-hd">
              <div class="section-title">Your skill profile</div>
            </div>
            <div class="dc-card skill-card">
              <div class="skill-meters">
                <div class="skill-row">
                  <div class="skill-name">Technical Analysis</div>
                  <div class="skill-bar">
                    <div class="skill-fill" style="width:42%;background:var(--red)"></div>
                  </div>
                  <div class="skill-val">42</div>
                </div>
                <div class="skill-row">
                  <div class="skill-name">Risk Management</div>
                  <div class="skill-bar">
                    <div class="skill-fill" style="width:18%;background:var(--info)"></div>
                  </div>
                  <div class="skill-val">18</div>
                </div>
                <div class="skill-row">
                  <div class="skill-name">Psychology</div>
                  <div class="skill-bar">
                    <div class="skill-fill" style="width:30%;background:var(--warning)"></div>
                  </div>
                  <div class="skill-val">30</div>
                </div>
                <div class="skill-row">
                  <div class="skill-name">Market Structure</div>
                  <div class="skill-bar">
                    <div class="skill-fill" style="width:10%;background:var(--profit)"></div>
                  </div>
                  <div class="skill-val">10</div>
                </div>
              </div>
            </div>
          </div>
          <div>
            <div class="section-hd">
              <div class="section-title">AI insight</div>
            </div>
            <div class="dc-card ai-insight-card">
              <div class="ai-insight-header">
                <div class="ai-badge">ü§ñ PocketPT</div>
                <span style="font-size:11px;color:var(--txt-muted);">Based on your last 5 trades</span>
              </div>
              <p class="ai-insight-text">
                Your <strong>entries are strong</strong>, but you're closing trades too early ‚Äî averaging only
                <span style="color:var(--loss);font-weight:600;">0.8R</span> when your setups justify
                <span style="color:var(--profit);font-weight:600;">2.0R+</span>. Your biggest growth area right now
                is <strong>trade management after entry</strong>. I've added a lesson specifically about this.
              </p>
              <button class="pill-link" id="tutor-pill-link">Ask me about this ‚Üí</button>
            </div>
          </div>
        </div>

      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SCENARIOS MODAL (Hidden, triggered from Learn tab)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="scenarios-modal" class="modal-overlay">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Practice Scenarios</h2>
          <button class="modal-close" id="close-modal-scenario">‚úï</button>
        </div>
        <div class="modal-body">
          <div class="scenario-card">
            <div class="scenario-meta">
              <span class="chip" id="scenarioChip">GOLD / XAU</span>
              <span class="scenario-num">Question <span id="qNum">1</span> / 4</span>
            </div>
            <div class="scenario-context">
              <p id="scenarioContextText"></p>
            </div>
            <div class="market-data-row" id="marketDataRow"></div>
            <div class="scenario-question">
              <p id="scenarioQuestion"></p>
            </div>
            <div class="choice-grid" id="choiceGrid"></div>
            <div class="ai-explain" id="aiExplain">
              <div class="ai-explain-header">
                <div class="ai-badge">ü§ñ Explanation</div>
              </div>
              <div class="ai-explain-text" id="aiExplainText"></div>
              <div class="ai-followup-label">Learn more:</div>
              <div class="ai-followup" id="aiFollowup"></div>
            </div>
            <div class="scenario-nav">
              <button class="btn-secondary" id="btn-previous">‚Üê Previous</button>
              <div class="scenario-score" id="scenarioScore"></div>
              <button class="btn-primary" id="btn-next-scenario">Next ‚Üí</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     LEADERBOARD TAB
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="tab-leaderboard" class="tab-page">
      <div class="page-header">
        <div class="page-tag">
          <div class="live-dot-tag"></div>Global Ranking
        </div>
        <h1>Top <em>Performers</em></h1>
        <p>Rankings are based on total XP earned from lessons and scenarios. Keep trading to climb the ranks!</p>
      </div>
      <div class="main-content">

        <div class="leaderboard-grid">

          <!-- LEFT COLUMN: STREAK -->
          <div class="leaderboard-left">
            <div class="streak-card-full">
              <div class="streak-society">Streak Society</div>
              <div class="streak-main-row">
                <div>
                  <div class="streak-val-big">1037</div>
                  <div class="streak-label-big">day streak!</div>
                </div>
                <div class="streak-flame-icon">üî•</div>
              </div>
              <div class="streak-info-banner">
                <div class="streak-info-icon">‚òÄÔ∏è</div>
                <div class="streak-info-text">You've extended your streak 2 times before noon this week!</div>
              </div>
            </div>

            <div class="calendar-card">
              <div class="cal-header">
                <span>&lt;</span>
                <span>March 2024</span>
                <span>&gt;</span>
              </div>
              <div class="cal-grid">
                <div class="cal-day-label">Su</div>
                <div class="cal-day-label">Mo</div>
                <div class="cal-day-label">Tu</div>
                <div class="cal-day-label">We</div>
                <div class="cal-day-label">Th</div>
                <div class="cal-day-label">Fr</div>
                <div class="cal-day-label">Sa</div>

                <div class="cal-date"></div>
                <div class="cal-date"></div>
                <div class="cal-date"></div>
                <div class="cal-date"></div>
                <div class="cal-date"></div>
                <div class="cal-date active range-start">1</div>
                <div class="cal-date active range-end">2</div>

                <div class="cal-date active range-start">3</div>
                <div class="cal-date active range">4</div>
                <div class="cal-date active range">5</div>
                <div class="cal-date active range">6</div>
                <div class="cal-date active range">7</div>
                <div class="cal-date active range">8</div>
                <div class="cal-date active range-end">9</div>

                <div class="cal-date active range-start">10</div>
                <div class="cal-date active range">11</div>
                <div class="cal-date active range">12</div>
                <div class="cal-date active range">13</div>
                <div class="cal-date active range">14</div>
                <div class="cal-date active range">15</div>
                <div class="cal-date active range-end">16</div>

                <div class="cal-date active range-start">17</div>
                <div class="cal-date active range">18</div>
                <div class="cal-date active range">19</div>
                <div class="cal-date active range">20</div>
                <div class="cal-date active range">21</div>
                <div class="cal-date active range">22</div>
                <div class="cal-date active range-end">23</div>

                <div class="cal-date">24</div>
                <div class="cal-date active">25</div>
                <div class="cal-date active">26</div>
                <div class="cal-date">27</div>
                <div class="cal-date">28</div>
                <div class="cal-date">29</div>
                <div class="cal-date">30</div>

                <div class="cal-date">31</div>
              </div>
            </div>
          </div>

          <!-- RIGHT COLUMN: LEAGUE & LIST -->
          <div class="leaderboard-right">

            <div class="leaderboard-league-header">
              <div class="league-visuals">
                <div class="league-gem gem-pink"></div>
                <div class="league-gem gem-dark"></div>
                <div class="league-gem gem-main">üíé</div>
              </div>
              <div class="league-title-sub">MY CURRENT LEAGUE</div>
              <div class="league-title-main">Diamond League</div>
            </div>

            <div class="league-tiers-card">
              <div class="tiers-title">Tiers</div>
              <div class="tiers-grid">
                <div class="tier-item">
                  <div class="tier-icon">‚öôÔ∏è</div>
                  <div class="tier-name">Iron</div>
                </div>
                <div class="tier-item">
                  <div class="tier-icon">ü•â</div>
                  <div class="tier-name">Bronze</div>
                </div>
                <div class="tier-item">
                  <div class="tier-icon">ü•à</div>
                  <div class="tier-name">Silver</div>
                </div>
                <div class="tier-item">
                  <div class="tier-icon">ü•á</div>
                  <div class="tier-name">Gold</div>
                </div>
                <div class="tier-item">
                  <div class="tier-icon">üí†</div>
                  <div class="tier-name">Platinum</div>
                </div>
                <div class="tier-item">
                  <div class="tier-icon">üçÄ</div>
                  <div class="tier-name">Emerald</div>
                </div>
                <div class="tier-item active">
                  <div class="tier-icon">üíé</div>
                  <div class="tier-name">Diamond</div>
                </div>
                <div class="tier-item">
                  <div class="tier-icon">üîÆ</div>
                  <div class="tier-name">Master</div>
                </div>
                <div class="tier-item">
                  <div class="tier-icon">üî¥</div>
                  <div class="tier-name">Grandmaster</div>
                </div>
                <div class="tier-item">
                  <div class="tier-icon">üëë</div>
                  <div class="tier-name">Challenger</div>
                </div>
              </div>
            </div>

            <div class="leaderboard-list-card">
              <div class="lb-item">
                <div class="lb-rank-num">
                  <div class="lb-rank-box">
                    <div class="medal medal-1">1</div>
                  </div>
                </div>
                <div class="lb-av-circle" style="background:#ffedcc">üë§</div>
                <div class="lb-name-col">
                  <div class="lb-name-bold">Jason</div>
                </div>
                <div class="lb-xp-col">597 XP</div>
              </div>
              <div class="lb-item">
                <div class="lb-rank-num">
                  <div class="lb-rank-box">
                    <div class="medal medal-2">2</div>
                  </div>
                </div>
                <div class="lb-av-circle" style="background:#e0f2ff">üë∑</div>
                <div class="lb-name-col">
                  <div class="lb-name-bold">Cindy</div>
                </div>
                <div class="lb-xp-col">252 XP</div>
              </div>
              <div class="lb-item">
                <div class="lb-rank-num">
                  <div class="lb-rank-box">
                    <div class="medal medal-3">3</div>
                  </div>
                </div>
                <div class="lb-av-circle" style="background:#f9ebea">üë©‚Äçüé®</div>
                <div class="lb-name-col">
                  <div class="lb-name-bold">Ashley</div>
                </div>
                <div class="lb-xp-col">224 XP</div>
              </div>
              <div class="lb-item me">
                <div class="lb-rank-num">
                  <div class="lb-rank-box"><span class="rank-num-flat">4</span></div>
                </div>
                <div class="lb-av-circle" style="background:var(--red);color:#fff">YOU</div>
                <div class="lb-name-col">
                  <div class="lb-name-bold">You</div>
                </div>
                <div class="lb-xp-col">240 XP</div>
              </div>
              <div class="lb-item">
                <div class="lb-rank-num">
                  <div class="lb-rank-box"><span class="rank-num-flat">5</span></div>
                </div>
                <div class="lb-av-circle" style="background:#e8f8f5">üë≤</div>
                <div class="lb-name-col">
                  <div class="lb-name-bold">Sergio</div>
                </div>
                <div class="lb-xp-col">156 XP</div>
              </div>
            </div>

          </div>
        </div>

      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     TUTOR TAB (COMPLETELY UNTOUCHED)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="tab-tutor" class="tab-page">
      <div class="page-header">
        <div class="page-tag">
          <div class="live-dot-tag"></div>AI-Powered
        </div>
        <h1>Your personal <em>trading tutor</em></h1>
        <p>Ask anything. Get explanations using YOUR instruments, at YOUR level.</p>
      </div>
      <div class="main-content">
        <div class="dc-card tutor-card">
          <div class="chat-messages" id="tutorMessages">
            <div class="msg ai">
              <div class="msg-av ai">ü§ñ</div>
              <div class="bubble">
                Hey! I'm your PocketPT tutor. üëã<br><br>
                I know you trade <strong>Synthetic Indices</strong> and you're at an <strong>intermediate
                  level</strong>.
                Ask me anything ‚Äî from explaining RSI to breaking down why your last trade went wrong.<br><br>
                What would you like to understand today?
              </div>
            </div>
          </div>
          <div class="chat-input-row">
            <input class="chat-input" id="tutorInput" placeholder="Ask your tutor anything..." />
            <button class="chat-send" id="sendBtn">‚Üë</button>
          </div>
        </div>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     AUTOPSY TAB
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="tab-autopsy" class="tab-page">
      <div class="page-header">
        <div class="page-tag">
          <div class="live-dot-tag"></div>Trade Autopsy
        </div>
        <h1>Learn from <em>your own</em> trades</h1>
        <p>Analyze your past trades from Deriv or manually enter trade details for AI-powered insights.</p>
      </div>
      <div class="main-content">

        <!-- Mode Selection -->
        <div style="display:flex;gap:12px;margin-bottom:24px;">
          <button class="btn-primary" id="btnPastTrades" style="flex:1;">
            üìä Analyze Past Trades
          </button>
          <button class="btn-secondary" id="btnManualEntry" style="flex:1;">
            ‚úçÔ∏è Manual Entry
          </button>
        </div>

        <!-- Past Trades Section -->
        <div id="pastTradesSection" style="display:none;">
          <div class="dc-card" style="margin-bottom:24px;">
            <div class="card-hd">
              <div class="card-title">Your Past Trades from Deriv</div>
              <div style="display:flex;gap:8px;align-items:center;">
                <select id="tradeLimit" class="field-input" style="width:auto;padding:6px 12px;font-size:13px;">
                  <option value="10">Last 10</option>
                  <option value="20" selected>Last 20</option>
                  <option value="50">Last 50</option>
                  <option value="100">Last 100</option>
                </select>
                <button class="btn-secondary" id="fetch-past-trades" style="padding:6px 16px;font-size:13px;">
                  üîÑ Refresh
                </button>
              </div>
            </div>

            <!-- Loading State -->
            <div id="tradesLoading" style="display:none;text-align:center;padding:40px;">
              <div class="typing-row" style="justify-content:center;">
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
              </div>
              <p style="color:var(--txt-muted);margin-top:12px;font-size:13px;">Loading trades from Deriv...</p>
            </div>

            <!-- Trades Table -->
            <div id="tradesTableContainer" style="display:none;">
              <div style="overflow-x:auto;margin-top:16px;">
                <table style="width:100%;border-collapse:collapse;">
                  <thead>
                    <tr style="background:var(--bg-hover);text-align:left;">
                      <th style="padding:10px 12px;font-size:12px;font-weight:600;color:var(--txt-muted);">
                        <input type="checkbox" id="selectAll" style="cursor:pointer;">
                      </th>
                      <th style="padding:10px 12px;font-size:12px;font-weight:600;color:var(--txt-muted);">Contract Type
                      </th>
                      <th style="padding:10px 12px;font-size:12px;font-weight:600;color:var(--txt-muted);">Symbol</th>
                      <th style="padding:10px 12px;font-size:12px;font-weight:600;color:var(--txt-muted);">Buy Time</th>
                      <th style="padding:10px 12px;font-size:12px;font-weight:600;color:var(--txt-muted);">Stake</th>
                      <th style="padding:10px 12px;font-size:12px;font-weight:600;color:var(--txt-muted);">Duration</th>
                      <th style="padding:10px 12px;font-size:12px;font-weight:600;color:var(--txt-muted);">P/L</th>
                    </tr>
                  </thead>
                  <tbody id="tradesTableBody">
                  </tbody>
                </table>
              </div>

              <div style="margin-top:16px;padding-top:16px;border-top:1px solid var(--border);">
                <div style="display:flex;justify-content:space-between;align-items:center;">
                  <div style="color:var(--txt-muted);font-size:13px;">
                    <span id="selectedCount">0</span> trade(s) selected
                  </div>
                  <button class="btn-primary" id="btnAnalyzeSelected" disabled>
                    üî¨ Analyze Selected Trades
                  </button>
                </div>
              </div>
            </div>

            <!-- Error State -->
            <div id="tradesError" style="display:none;padding:20px;text-align:center;">
              <div style="color:var(--loss);font-size:24px;margin-bottom:8px;">‚ö†Ô∏è</div>
              <div style="color:var(--txt);font-weight:500;margin-bottom:4px;" id="errorTitle">Error</div>
              <div style="color:var(--txt-muted);font-size:13px;" id="errorMessage"></div>
            </div>
          </div>
        </div>

        <!-- Manual Entry Section -->
        <div id="manualEntrySection" style="display:none;">
          <div class="dc-card autopsy-card">
            <div class="section-hd" style="margin-bottom:14px;">
              <div class="section-title">Enter your trade details</div>
            </div>
            <div class="input-grid">
              <div class="field">
                <div class="field-label">Instrument</div>
                <select class="field-input" id="tradeInstrument">
                  <option>Gold (XAU/USD)</option>
                  <option>EUR/USD</option>
                  <option>Volatility 75</option>
                  <option>Volatility 100</option>
                  <option>Boom 1000</option>
                  <option>Crash 500</option>
                  <option>Bitcoin (BTC)</option>
                </select>
              </div>
              <div class="field">
                <div class="field-label">Direction</div>
                <select class="field-input" id="tradeDir">
                  <option>BUY (Long)</option>
                  <option>SELL (Short)</option>
                </select>
              </div>
              <div class="field">
                <div class="field-label">Entry Price</div>
                <input class="field-input" id="tradeEntry" placeholder="e.g. 2345.50" type="number" />
              </div>
              <div class="field">
                <div class="field-label">Exit Price</div>
                <input class="field-input" id="tradeExit" placeholder="e.g. 2312.00" type="number" />
              </div>
              <div class="field">
                <div class="field-label">Stop Loss</div>
                <input class="field-input" id="tradeSL" placeholder="e.g. 2330.00" type="number" />
              </div>
              <div class="field">
                <div class="field-label">Take Profit</div>
                <input class="field-input" id="tradeTP" placeholder="e.g. 2380.00" type="number" />
              </div>
              <div class="field">
                <div class="field-label">Result ($)</div>
                <input class="field-input" id="tradeResult" placeholder="e.g. -45.00" type="number" />
              </div>
              <div class="field">
                <div class="field-label">Your Experience</div>
                <select class="field-input" id="traderLevel">
                  <option>Beginner</option>
                  <option selected>Intermediate</option>
                  <option>Advanced</option>
                </select>
              </div>
            </div>
            <div class="field" style="margin-bottom:12px;">
              <div class="field-label">What were you thinking? (optional)</div>
              <textarea class="field-input" id="tradeThoughts"
                placeholder="e.g. I saw RSI was oversold so I bought, but the price kept falling..."
                style="resize:vertical;min-height:64px;line-height:1.5;padding-top:8px;"></textarea>
            </div>
            <button class="autopsy-run" id="btn-autopsy-run">üî¨ Analyse This Trade</button>
          </div>
        </div>

        <!-- Autopsy Results (Shared by both modes) -->
        <div class="autopsy-result" id="autopsyResult">
          <div class="verdict-row">
            <div class="verdict-icon" id="verdictIcon"></div>
            <div>
              <div class="verdict-title" id="verdictLabel"></div>
              <div class="verdict-sub" id="verdictSub"></div>
            </div>
          </div>
          <div class="lessons" id="autopsyLessons"></div>
          <div class="next-step-block">
            <div class="next-step-label">Next step</div>
            <div class="next-step-text" id="autopsyNextStep"></div>
            <div class="next-step-actions" id="autopsyActions"></div>
          </div>
        </div>
      </div>
    </div>

  </div><!-- /.app -->

  <!-- XP Toast -->
  <div class="xp-toast" id="xpToast">
    <div>
      <div class="xp-amount" id="xpAmount">+20 XP</div>
      <div class="xp-label" id="xpReason">Correct answer!</div>
    </div>
  </div>

  <!-- Include AI Integration Module -->
  <script src="../ai-integration.js" type="module"></script>
  <script src="../js/trading_edu.js" type="module"></script>


</body>

</html>